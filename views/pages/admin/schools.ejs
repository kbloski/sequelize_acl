<%- include('../partials/head', {title: 'School'}) %> 
<body>
    <h3>Schools list</h3>
    <%- include('../partials/navbar', {user: user}) %>
    <table class="table">
        <tr>
            <th>_id</th>
            <th>Name</th>
            <th>Address</th>
            <th>Director</th>
            <th>Actions</th>
        </tr>
        <% for(const school of schools){ %>
        <tr>
            <td><%= school.id %></td>
            <td><%= school.name %></td>
            <td><%= school.address %></td>
            <% let director = directors.filter( v => v.schoolId == school.id) %>
            <% directorFullName = (director[0]) ? director[0].name + ' ' + director[0].surname : 'brak'  %>
            <td><%= directorFullName %></td>
            <td>
                <%- htmlHelper.getLinkCodeForUserRoleOrHigher(user.role, 'admin', '/admin/schools/edit/' + school.id, 'Edit') %>
                <%- htmlHelper.getLinkCodeForUserRoleOrHigher(user.role, 'admin', '/admin/schools/View/' + school.id, 'View') %>
            </td>
            
        </tr>
        <% } %>
    </table>
    <a href="/admin/schools/add"><button class="btn">Add school</button></a></li>

    <%- include('../partials/footer') %>
</body>
</html>